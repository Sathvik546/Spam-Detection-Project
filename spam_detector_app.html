<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spam Message Detector - Secure Mail Analyzer</title>
    <!-- Load Tailwind CSS for modern styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom CSS for Inter font and background gradient */
        body {
            font-family: 'Inter', sans-serif;
            /* Subtle blue/purple gradient background for a modern look */
            background: linear-gradient(135deg, #e0f2f1 0%, #cfd8dc 100%); 
        }
        .app-card {
            background-color: #ffffff;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border: 1px solid #e0e0e0;
        }
        /* Custom hover effect for the button */
        #predict-button:hover {
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.5);
        }
        /* Style for the confidence bar */
        .confidence-bar-container {
            height: 8px;
            background-color: #e5e7eb;
            border-radius: 9999px;
            overflow: hidden;
        }
        .confidence-bar {
            height: 100%;
            transition: width 0.5s ease-in-out;
            border-radius: 9999px;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div class="app-card w-full max-w-2xl rounded-2xl p-8 space-y-8">

        <!-- Header -->
        <header class="text-center space-y-3 border-b pb-4 border-gray-100">
            <div class="text-5xl text-red-600 animate-pulse" role="img" aria-label="Shield Icon">üõ°Ô∏è</div>
            <h1 class="text-3xl font-extrabold text-gray-900 tracking-tight">Secure Mail Analyzer</h1>
            <p class="text-base text-gray-500">Input any message to classify it instantly (Simulation Mode).</p>
        </header>

        <!-- Input Area -->
        <div class="space-y-4">
            <label for="message-input" class="block text-sm font-semibold text-gray-700">Message Content:</label>
            <textarea id="message-input" rows="7" 
                      class="w-full p-4 border border-gray-300 rounded-xl focus:ring-red-500 focus:border-red-500 transition duration-200 resize-none text-gray-800 shadow-sm hover:shadow-md"
                      placeholder="e.g., Congratulations! You have won a free $1000 prize. Click this link NOW!"></textarea>
            
            <button id="predict-button" 
                    class="w-full py-3 px-6 bg-red-600 text-white font-bold text-lg rounded-xl shadow-lg hover:bg-red-700 focus:outline-none focus:ring-4 focus:ring-red-400 transition duration-300 transform active:scale-95">
                CLASSIFY MESSAGE
            </button>
        </div>

        <!-- Output Display -->
        <div id="output-container" class="space-y-4 pt-4 border-t border-gray-100">
            <h2 class="text-xl font-bold text-gray-800">Analysis Result</h2>
            <div id="result-box" class="hidden p-5 rounded-xl text-left border shadow-lg">
                <div class="flex items-center space-x-3">
                    <span id="status-icon" class="text-2xl"></span>
                    <p class="text-xl font-extrabold" id="result-text"></p>
                </div>
                
                <p class="text-sm mt-3 mb-2" id="confidence-label"></p>
                
                <div class="confidence-bar-container">
                    <div id="confidence-bar" class="confidence-bar" style="width: 0%;"></div>
                </div>

                <p class="text-xs mt-3 text-gray-600" id="confidence-value"></p>
            </div>
        </div>

        <!-- Model Note -->
        <footer class="text-center text-xs text-gray-500 pt-4 border-t border-gray-100">
            *This is a simulation interface. It shows the aesthetic and functional design of your application.
        </footer>
    </div>

    <script>
        const messageInput = document.getElementById('message-input');
        const predictButton = document.getElementById('predict-button');
        const resultBox = document.getElementById('result-box');
        const resultText = document.getElementById('result-text');
        const statusIcon = document.getElementById('status-icon');
        const confidenceLabel = document.getElementById('confidence-label');
        const confidenceValue = document.getElementById('confidence-value');
        const confidenceBar = document.getElementById('confidence-bar');

        const SPAM_KEYWORDS = [
            'free', 'win', 'prize', 'claim', 'urgent', 'congratulations', 
            'guaranteed', 'cash', 'money', 'sex', 'investment', 'offer', 'now', 'click here', 'exclusive'
        ];

        function simulatePrediction(message) {
            const lowerCaseMessage = message.toLowerCase();
            let spamScore = 0;

            // Simple heuristic: count keywords
            SPAM_KEYWORDS.forEach(keyword => {
                if (lowerCaseMessage.includes(keyword)) {
                    // Increase score significantly for strong keywords
                    spamScore += (keyword === 'urgent' || keyword === 'free' || keyword === 'claim') ? 0.35 : 0.15; 
                }
            });

            // Factor in length (very short messages are often spam, very long are often ham)
            const length = message.split(/\s+/).length;
            if (length < 8 && spamScore > 0.1) {
                spamScore += 0.2; 
            } else if (length > 30 && spamScore < 0.5) {
                 spamScore -= 0.1;
            }

            // Cap and floor the score
            spamScore = Math.max(0.01, Math.min(0.99, spamScore));
            return spamScore; 
        }

        function updateConfidenceBar(score) {
            confidenceBar.style.width = `${score * 100}%`;
        }

        function handlePrediction() {
            const message = messageInput.value.trim();
            if (message === "") {
                resultBox.classList.add('hidden');
                return;
            }

            const score = simulatePrediction(message);
            const isSpam = score > 0.5;
            const confidence = isSpam ? score : (1 - score);
            const confidencePercent = (confidence * 100).toFixed(2);
            
            // Remove previous colors/classes
            resultBox.classList.remove('hidden', 'bg-green-100', 'bg-red-100', 'border-green-400', 'border-red-400', 'text-green-800', 'text-red-800');
            confidenceBar.classList.remove('bg-green-500', 'bg-red-500', 'bg-yellow-500');

            // Apply new styling based on prediction
            if (isSpam) {
                resultBox.classList.add('bg-red-50', 'border-red-400', 'text-red-800');
                statusIcon.textContent = "üö®";
                resultText.textContent = "CLASSIFIED AS SPAM";
                confidenceLabel.textContent = `SPAM Confidence: ${confidencePercent}%`;
                confidenceBar.classList.add('bg-red-500');
            } else {
                resultBox.classList.add('bg-green-50', 'border-green-400', 'text-green-800');
                statusIcon.textContent = "üëç";
                resultText.textContent = "CLASSIFIED AS HAM";
                confidenceLabel.textContent = `HAM Confidence: ${confidencePercent}%`;
                confidenceBar.classList.add('bg-green-500');
            }
            
            confidenceValue.textContent = `Raw Probability Score: ${score.toFixed(4)}`;
            updateConfidenceBar(isSpam ? score : (1 - score));
            resultBox.classList.remove('hidden');
        }

        // Attach event listener
        predictButton.addEventListener('click', handlePrediction);
        
        // Allow pressing Enter in the textarea
        messageInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault(); // Prevent newline in textarea
                handlePrediction();
            }
        });

        // Initial setup
        messageInput.value = "Hey John, can we reschedule the meeting for lunch tomorrow? I'll bring the sales report.";
        handlePrediction(); 
    </script>

</body>
</html>
